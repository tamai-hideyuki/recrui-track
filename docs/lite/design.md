# ğŸš§ RecruiTrack Lite ç°¡æ˜“è¦ä»¶å®šç¾© & ç°¡æ˜“è¨­è¨ˆæ›¸

- ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€RecruiTrack Liteï¼ˆè»¢è·ToDoç®¡ç†ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼‰ã®è¨­è¨ˆã‚’ç°¡å˜ã«ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚  
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã¯ Honoï¼‹Drizzleã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã¯ Next.js ã‚’ç”¨ã„ãŸãƒ¢ãƒãƒ¬ãƒæ§‹æˆã‚’å‰æã¨ã—ã€DDDï¼‹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è€ƒãˆæ–¹ã‚’å–ã‚Šå…¥ã‚ŒãŸãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†å‰²ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚
- UI ã‚„ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆã€API ä»•æ§˜ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãªã©ã‚’ç¶²ç¾…ã—ã¾ã™ã€‚

---

## 1. ä»•æ§˜ãƒ»ç›®çš„

### 1.1 ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ¦‚è¦
- **RecruiTrack Lite** ã¯ã€è»¢è·æ´»å‹•ä¸­ã«å¿…è¦ãªã‚¿ã‚¹ã‚¯ï¼ˆToDoï¼‰ã‚’ä¸€å…ƒç®¡ç†ã—ã€è‡ªåˆ†ã®è¡Œå‹•ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒŸãƒ‹ãƒãƒ ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã§ã™ã€‚
- æ©Ÿèƒ½ã¯ã€ŒToDo ã® CRUDï¼ˆä½œæˆãƒ»å–å¾—ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ï¼‰ã€ã«é™å®šã—ã¾ã™ã€‚

### 1.2 ç›®çš„
- **ã‚¿ã‚¹ã‚¯å¯è¦–åŒ–**ï¼šè»¢è·ã«å¿…è¦ãªæº–å‚™ã‚„ä¼æ¥­èª¿æŸ»ã€é¢æ¥æº–å‚™ãªã©ã‚’æŠŠæ¡ãƒ»ç®¡ç†ã™ã‚‹ã€‚
- **ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆ**ï¼šæœ€å°é™ã®æ©Ÿèƒ½ã«çµã‚‹ã“ã¨ã§ã€çŸ­æœŸé–“ã§å‹•ä½œç¢ºèªãŒå®Œäº†ã™ã‚‹è¿…é€Ÿãªé–‹ç™ºã‚’å®Ÿç¾ã€‚
- **æŠ€è¡“ã‚¢ãƒ”ãƒ¼ãƒ«**ï¼šDDDï¼‹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å–ã‚Šå…¥ã‚ŒãŸãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†å‰²ã€ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã€Dockerï¼EC2ã‚’æ´»ç”¨ã—ãŸã‚¤ãƒ³ãƒ•ãƒ©å¯¾å¿œã‚’é€šã˜ã¦ã€æŠ€è¡“çš„ãªå®Ÿè¡ŒåŠ›ã‚’è¨¼æ˜ã™ã‚‹ã€‚
- **æ‹¡å¼µæ€§**ï¼šå°†æ¥çš„ã«ã€Œé¢è«‡ãƒ­ã‚°ç®¡ç†ã€ã€Œä¼æ¥­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†ã€ã€Œæ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãªã©è¤‡é›‘åŒ–ã—ã¦ã‚‚å¯¾å¿œã§ãã‚‹è¨­è¨ˆåŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

### 1.3 æƒ³å®šãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
- **ToDo ã®è¿½åŠ **ï¼ˆã‚¿ã‚¹ã‚¯åã‚’å…¥åŠ›ã—ã€ToDo ã‚’æ–°è¦ä½œæˆã™ã‚‹ï¼‰
- **ToDo ã®ä¸€è¦§å–å¾—**ï¼ˆä½œæˆæ—¥æ™‚é †ã«ã‚½ãƒ¼ãƒˆã—ãŸ ToDo ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºï¼‰
- **ToDo ã®ç·¨é›†**ï¼ˆã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´ã€å®Œäº†ãƒ•ãƒ©ã‚°ã®åˆ‡ã‚Šæ›¿ãˆï¼‰
- **ToDo ã®å‰Šé™¤**ï¼ˆæŒ‡å®šã—ãŸ ToDo ã‚’å‰Šé™¤ï¼‰

---

## 2. å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã¨ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ 

```text
recrui-track/                
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ frontend/              â† Next.js å´
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â””â”€â”€ backend/               â† Hono + Drizzle å´
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ domain/
â”‚       â”‚   â”œâ”€â”€ application/
â”‚       â”‚   â”œâ”€â”€ infrastructure/
â”‚       â”‚   â”œâ”€â”€ interface/
â”‚       â”‚   â””â”€â”€ shared/
â”‚       â”œâ”€â”€ drizzle.config.ts
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ docker/
â”‚   â””â”€â”€ nginx/
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”œâ”€â”€ lite.md                   
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ deploy.yml


```

- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆ`apps/frontend`ï¼‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆ`apps/backend`ï¼‰ãŒ **ä¸¦åˆ—** ã«å­˜åœ¨ã—ã€Docker Compose ã§ä¸€æ‹¬èµ·å‹•ã—ã¾ã™ã€‚
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ **DDDï¼‹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†å‰²ã‚’è¡Œã„ã€ãã‚Œãã‚Œã®è²¬å‹™ãŒæ˜ç¢ºåŒ–ã•ã‚Œã¾ã™ã€‚

```mermaid
flowchart TB
  subgraph EC2["AWS EC2 (Docker Compose)"]
    direction TB

    subgraph NGINX["Nginx ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·"]
      direction LR
      API["/api/* â†’ Backend:8787"] 
      WEB["/* â†’ Frontend:3000"]
    end

    subgraph COMPOSE["Docker Compose"]
      direction TB
      Front["Frontend (Next.js)  Port:3000"]
      Back["Backend (Hono)      Port:8787"]
    end

    DB["SQLite (local.db)  or Supabase/Postgres"]
  end

```

---
## ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤è¨­è¨ˆ
- Todo ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
  - ä¸€æ„è­˜åˆ¥å­ï¼ˆid: stringï¼‰
  - ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆtitle: stringï¼‰â€¦ç©ºæ–‡å­—ç¦æ­¢ã€æœ€å¤§100æ–‡å­—
  - å®Œäº†ãƒ•ãƒ©ã‚°ï¼ˆcompleted: booleanï¼‰
  - ä½œæˆæ—¥æ™‚ï¼ˆcreatedAt: Dateï¼‰
  - æ›´æ–°æ—¥æ™‚ï¼ˆupdatedAt: Dateï¼‰
  

- entity/Todo.tsï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰
  - ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ï¼š
    - ã‚¿ã‚¤ãƒˆãƒ«ã¯ Title.create() ã«ã‚ˆã£ã¦ãƒˆãƒªãƒ æ¸ˆã¿ãƒ»ç©ºæ–‡å­—ç¦æ­¢ãƒ»æ–‡å­—æ•°åˆ¶é™ã‚’æ‹…ä¿ã€‚
    - complete() ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€Œé‡è¤‡å®Œäº†ç¦æ­¢ã€ã‚„æ›´æ–°æ—¥æ™‚ã®æ›´æ–°ã‚’è¡Œã†ã€‚
    - changeTitle() ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€Œã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´æ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŠã‚ˆã³æ›´æ–°æ—¥æ™‚æ›´æ–°ã€ã‚’è¡Œã†ã€‚
  

- value-object/Title.tsï¼ˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
  - å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å½¹å‰²ï¼š
    - æ–‡å­—åˆ—ã¨ã—ã¦ã®ã‚¿ã‚¤ãƒˆãƒ«ã«ã€Œä¸å¤‰æ€§ã€ã€Œãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚’ä»˜ä¸ã€‚
    - ç›´æ¥æ–‡å­—åˆ—ã‚’æ‰±ã†ã®ã§ã¯ãªãã€Title.create() ã‚’ä»‹ã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã“ã¨ã§ã€ç©ºæ–‡å­—ã‚„é•·ã™ãã‚‹æ–‡å­—åˆ—ã‚’é˜²æ­¢ã€‚
  

- repository/ITodoRepository.tsï¼ˆãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰
  - ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ãŒä¾å­˜ã™ã‚‹ã€Œæ°¸ç¶šåŒ–å‡¦ç†ã€ã®æŠ½è±¡ã‚’å®šç¾©ã€‚
  - ã©ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¡Œã†ã‹ã¯ã€ã‚¤ãƒ³ãƒ•ãƒ©å®Ÿè£…ï¼ˆDrizzleTodoRepositoryï¼‰ã«å§”è­²ã•ã‚Œã‚‹ã€‚



---
## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤è¨­è¨ˆ

-  DTOï¼ˆãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
- CreateTodoInput.ts
- UpdateTodoInput.ts
- TodoOutput.ts
  - å½¹å‰²ï¼š
    - å…¥åŠ› DTOï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸ JSON ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã“ã®å‹ã§å—ã‘å–ã‚Šã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«æ¸¡ã™ã€‚
    - å‡ºåŠ› DTOï¼šãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒè¿”ã™ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ã€ã“ã®å‹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©çµŒç”±ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸è¿”ã™ã€‚
  

- ãƒãƒ¼ãƒˆï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ï¼ˆTodoRepositoryPort.tsï¼‰
  - ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã® ITodoRepository ã¨åŒå†…å®¹ã‚’å®šç¾©ã€‚
  - â€»é‡è¤‡ãŒæ°—ã«ãªã‚Šã¯ã˜ã‚ãŸã‚‰ã€domain/repository/ITodoRepository.ts ã‚’ãã®ã¾ã¾å†åˆ©ç”¨ã€‚
  

- ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆusecase/ï¼‰
**GetAllTodosUseCase.ts**
- å½¹å‰²ï¼š
  - ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å…¨ ToDo ã‚’å–å¾—ã—ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é…åˆ—ã‚’å‡ºåŠ› DTO é…åˆ—ã«å¤‰æ›ã—ã¦è¿”å´

**GetTodoByIdUseCase.ts**
- å½¹å‰²ï¼š
  - æŒ‡å®šã•ã‚ŒãŸ ID ã® ToDo ã‚’å–å¾—ã—ã€å­˜åœ¨ã—ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ã€å­˜åœ¨ã™ã‚Œã°å‡ºåŠ› DTO ã«å¤‰æ›ã—ã¦è¿”å´

**CreateTodoUseCase.ts**
- å½¹å‰²ï¼š
  - æ–°ã—ã„ ID ã‚’ç”Ÿæˆã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ä½œæˆ â†’ ãƒªãƒã‚¸ãƒˆãƒªã«ä¿å­˜ â†’ { id } ã‚’è¿”å´

**UpdateTodoUseCase.ts**
- å½¹å‰²ï¼š
  - æ—¢å­˜ ToDo ã‚’å–å¾—ã—ã€ã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´ã‚„å®Œäº†å‡¦ç†ã‚’è¡Œã£ã¦æ›´æ–° â†’ ãƒªãƒã‚¸ãƒˆãƒªã«ä¿å­˜ â†’ { id } ã‚’è¿”å´


**DeleteTodoUseCase.ts**
- å½¹å‰²
  - æŒ‡å®š ID ã® ToDo ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã€å­˜åœ¨ã™ã‚Œã°å‰Šé™¤ã€‚å­˜åœ¨ã—ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹ã€‚

---
## ã‚¤ãƒ³ãƒ•ãƒ©å±¤è¨­è¨ˆ

- db/schema.ts
- ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ï¼š
  - idï¼šæ–‡å­—åˆ—ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼ˆUUIDï¼‰
  - titleï¼šãƒ†ã‚­ã‚¹ãƒˆï¼ˆNOT NULLï¼‰
  - completedï¼šæ•´æ•°ï¼ˆ0/1 ã§ boolean ç›¸å½“ï¼‰
  - createdAtï¼updatedAtï¼šã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è‡ªå‹•ç”Ÿæˆ

- db/db.ts
  - ãƒ­ãƒ¼ã‚«ãƒ« DBï¼šlocal.db ã«å¯¾ã—ã¦ Drizzle ã‚’åˆæœŸåŒ–ã—ã€ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒã‚¤ãƒ³ãƒ‰
  - å°†æ¥çš„ã« Supabase/Postgres ã¸ç§»è¡Œã™ã‚‹å ´åˆã¯ new Database(process.env.DATABASE_URL) ãªã©ã«å¤‰æ›´å¯èƒ½ã€‚

- repository/DrizzleTodoRepository.ts
- å½¹å‰²ï¼š
  - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰å–å¾—ï¼æ°¸ç¶šåŒ–ã®ãŸã‚ã® CRUD æ“ä½œã‚’æ­£ã—ãå®Ÿè£…ã€‚
  - findAll â†’ ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã™ã¹ã¦å–å¾—ã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¤‰æ›ã€‚
  - findById â†’ æŒ‡å®š ID ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€å­˜åœ¨ã—ãªã‘ã‚Œã° nullã€‚
  - save â†’ æ—¢å­˜ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Œã°æ›´æ–°ã€ãªã‘ã‚Œã°æ–°è¦ä½œæˆã€‚
  - deleteById â†’ æŒ‡å®š ID ã‚’å‰Šé™¤ã€‚

---
## ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å±¤è¨­è¨ˆ

- controller/TodoController.ts
- å½¹å‰²ï¼š
  - HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ãƒœãƒ‡ã‚£ã‚’å–ã‚Šå‡ºã—ã€é©åˆ‡ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¤‰æ›ã—ã¦å®Ÿè¡Œ
  - æˆåŠŸæ™‚ãƒ»ä¾‹å¤–ç™ºç”Ÿæ™‚ã«å¿œã˜ãŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¿”å´
  - ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã‚„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸€åˆ‡æŒãŸãšã€ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™

- router/index.ts
- å½¹å‰²ï¼š
  - Hono ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–ã—ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç´ä»˜ã‘ã‚‹
  - ã“ã“ã§ã¯ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸€åˆ‡æ‰±ã‚ãšã€HTTP ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ã¿æ‹…å½“

- ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆï¼ˆsrc/index.tsï¼‰
- å½¹å‰²ï¼š
  - Hono ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šãƒãƒ¼ãƒˆã§èµ·å‹•ã€‚
  - ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹ãƒãƒ¼ãƒˆåˆ‡æ›¿ã‚’ã‚µãƒãƒ¼ãƒˆã€‚

## å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- errors.ts
- å½¹å‰²ï¼š
  - å„å±¤ã§æŠ•ã’ã‚‹å…±é€šã‚¨ãƒ©ãƒ¼ã‚’ã“ã“ã§å®šç¾©ã—ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ instanceof ã«ã‚ˆã‚‹ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¡Œã†ã€‚


## API ä»•æ§˜

| ãƒ¡ã‚½ãƒƒãƒ‰   | ãƒ‘ã‚¹               | èª¬æ˜         | ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£                                   | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹                                                |
| ------ | ---------------- | ---------- | ------------------------------------------ | ----------------------------------------------------- |
| GET    | `/api/todos`     | ToDo ä¸€è¦§å–å¾—  | ãªã—                                         | `[{ id, title, completed, createdAt, updatedAt }, â€¦]` |
| GET    | `/api/todos/:id` | æŒ‡å®š ToDo å–å¾— | ãªã—                                         | `{ id, title, completed, createdAt, updatedAt }`      |
| POST   | `/api/todos`     | ToDo ä½œæˆ    | `{ "title": "æ–‡å­—åˆ—" }`                       | `{ id: "ç”Ÿæˆã•ã‚ŒãŸUUID" }`                                 |
| PUT    | `/api/todos/:id` | ToDo æ›´æ–°    | `{ "title": "æ–‡å­—åˆ—", "completed": boolean }` | `{ id: "æ›´æ–°ã•ã‚ŒãŸID" }`                                   |
| DELETE | `/api/todos/:id` | ToDo å‰Šé™¤    | ãªã—                                         | `{ message: "deleted" }`                              |


- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ï¼š
  - 200 OKï¼šå–å¾—æˆåŠŸã€æ›´æ–°æˆåŠŸã€å‰Šé™¤æˆåŠŸ
  - 201 Createdï¼šæ–°è¦ä½œæˆæˆåŠŸ
  - 400 Bad Requestï¼šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
  - 404 Not Foundï¼šæŒ‡å®š ToDo ãŒå­˜åœ¨ã—ãªã„ã€ãªã©
  - 500 Internal Server Errorï¼šã‚µãƒ¼ãƒå†…éƒ¨ã‚¨ãƒ©ãƒ¼


## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

- ãƒ†ãƒ¼ãƒ–ãƒ«åï¼štodos
- ã‚«ãƒ©ãƒ ï¼š
  - idï¼šæ–‡å­—åˆ—ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼ˆUUID ç”Ÿæˆï¼‰
  - titleï¼šãƒ†ã‚­ã‚¹ãƒˆã€ç©ºæ–‡å­—ç¦æ­¢
  - completedï¼šæ•´æ•°ï¼ˆ0/1ï¼‰
  - created_atï¼updated_atï¼šã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è‡ªå‹•è¨­å®š

- Drizzle ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```bash

npx drizzle-kit diff       # å¤‰æ›´å·®åˆ†ã‚’ç”Ÿæˆ

npx drizzle-kit push       # SQLite (local.db) ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨


# Supabase/Postgres ã®å ´åˆã¯
# drizzle.config.ts ã‚’å¤‰æ›´ã—ã¦ driver: 'pg', url: process.env.DATABASE_URL ã¸åˆ‡ã‚Šæ›¿ãˆ
npx drizzle-kit diff       # å·®åˆ†ç”Ÿæˆï¼ˆPostgres å¯¾å¿œï¼‰

npx drizzle-kit push       # Supabase/Postgres ã«é©ç”¨
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆ

- å…±é€šå‹å®šç¾©ï¼ˆtodo.tsï¼‰
- API é€šä¿¡ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆlib/api.tsï¼‰
- ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (pages/index.tsx)
- å½¹å‰²ï¼š
  - API ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—ã¦ ToDo ã‚’å–å¾—ãƒ»ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ã€‚
  - ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ•ã‚©ãƒ¼ãƒ ã¨ãƒªã‚¹ãƒˆè¡¨ç¤ºã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ“ä½œã§ãã‚‹ UI ã‚’æ§‹ç¯‰ã€‚
  - Tailwind CSSã§é©åˆ‡ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®Ÿè£…

## ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
```mermaid

sequenceDiagram
participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼(ãƒ–ãƒ©ã‚¦ã‚¶)
    participant F as Frontend (Next.js)
    participant H as Hono (APIã‚µãƒ¼ãƒ)
    participant D as Drizzle/SQLite (DB)

    U->>F: ãƒ•ã‚©ãƒ¼ãƒ ã§ã‚¿ã‚¤ãƒˆãƒ«å…¥åŠ› & é€ä¿¡
    F->>H: POST /api/todos { title }
    Note right of H: TodoController.create()\nâ†’ CreateTodoUseCase.execute()
    H->>D: INSERT INTO todos (...)
                                                         D-->>H: INSERT æˆåŠŸ
  H-->>F: 201 Created { id }
    H-->>U: æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ -> ä¸€è¦§å–å¾—

    U->>F: GET /api/todos
  F->>H: GET /api/todos
  Note right of H: TodoController.getAll()\nâ†’ GetAllTodosUseCase.execute()
    H->>D: SELECT * FROM todos ORDER BY createdAt DESC
  D-->>H: [{â€¦}, {â€¦}, â€¦]
    H-->>F: 200 OK [å…¨ ToDo ãƒªã‚¹ãƒˆ]
    H-->>U: å–å¾—çµæœè¡¨ç¤º



```

## Dockerãƒ»ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆ
- Dockerfileï¼ˆfrontendï¼‰
  - ãƒ“ãƒ«ãƒ‰ï¼šyarn build ã§ Next.js ã‚’æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã—ã€yarn start ã§ã‚µãƒ¼ãƒèµ·å‹•ã€‚
  - ãƒãƒ¼ãƒˆï¼š3000 ç•ªã€‚

-  Dockerfileï¼ˆbackendï¼‰
  - ãƒ“ãƒ«ãƒ‰ï¼šyarn build ã«ã‚ˆã£ã¦ src/ ã® TypeScript ã‚’ dist/ ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€node dist/index.js ã§èµ·å‹•ã€‚
  - ãƒãƒ¼ãƒˆï¼š8787 ç•ªã€‚

- docker-compose.yml
  - frontendï¼šNext.js æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ãƒ»èµ·å‹•ã€‚
  - backendï¼šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¸ˆã¿ Node.js ã‚µãƒ¼ãƒã‚’èµ·å‹•ã—ã€SQLite ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã€‚
  - nginxï¼šãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦ã€/api/ ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€ãã®ä»–ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‚

-  Nginx è¨­å®šï¼ˆdocker/nginx/default.confï¼‰
  - /api/ â†’ backend:8787
  - ãã‚Œä»¥å¤– â†’ frontend:3000

- CI/CD è¨­è¨ˆï¼ˆGitHub Actionsï¼‰
  - .github/workflows/deploy.yml
  - Secretsï¼š 
    - EC2_SSH_PRIVATE_KEYï¼šEC2 ã¸ã® SSH ç§˜å¯†éµ 
    - EC2_HOSTï¼šEC2 ã®ã‚°ãƒ­ãƒ¼ãƒãƒ« IP ã‚¢ãƒ‰ãƒ¬ã‚¹
  - å‹•ä½œï¼š 
    - main ãƒ–ãƒ©ãƒ³ãƒã¸ã® Push ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã€ãƒªãƒã‚¸ãƒˆãƒªã‚’ EC2 ã«åŒæœŸ â†’ Docker Compose ã‚’ãƒªãƒ“ãƒ«ãƒ‰ã—ã¦å†èµ·å‹•ã€‚

## EC2 ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ EC2 ã¸è»¢é€
scp -r ./recrui-track ec2-user@<EC2-IP>:/home/ec2-user/

# 2. EC2 ã« SSH æ¥ç¶š
ssh ec2-user@<EC2-IP>

# 3. .env ã‚’ EC2 ä¸Šã§ä½œæˆï¼é…ç½®
#    ï¼ˆSupabase ç’°å¢ƒå¤‰æ•°ã‚„å¿…è¦ãªè¨­å®šã‚’è¨˜è¼‰ï¼‰

# 4. Docker Compose èµ·å‹•
cd /home/ec2-user/recrui-track
docker-compose down
docker-compose up -d --build

```

